{% extends 'base.html' %}

{% block content %}
<main class="container" style="padding: 20px;">
    <h1 class="welcome-msg">Work Time Manager Dashboard</h1>

    <div class="info-card">
        <h3>Project Workload</h3>
        <table class="projects-table">
            <thead>
                <tr>
                    <th>Project</th>
                    <th>Total Hours</th>
                </tr>
            </thead>
            <tbody>
                {% for project in projects_with_hours %}
                <tr>
                    <td>{{ project.name }}</td>
                    <td>
                        <strong>{{ project.total_hours|default:0|floatformat:1 }} h</strong>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div style="display: flex; gap: 20px; margin-bottom: 30px;">
        <div class="inner-form-container" style="flex: 1; text-align: center; background: #fff; padding: 20px; border: 1px solid #8fa5c0;">
            <h3 style="color: #555; font-size: 14px; text-transform: uppercase;">Total Projects</h3>
            <p style="font-size: 32px; font-weight: bold; color: #31a4f1; margin: 10px 0;">{{ total_projects }}</p>
            <a href="{% url 'projects:project-list' %}" class="action-btn" style="text-decoration: none; font-size: 12px;">View All</a>
        </div>

        <div class="inner-form-container" style="flex: 1; text-align: center; background: #fff; padding: 20px; border: 1px solid #8fa5c0;">
            <h3 style="color: #555; font-size: 14px; text-transform: uppercase;">Total Employees</h3>
            <p style="font-size: 32px; font-weight: bold; color: #31a4f1; margin: 10px 0;">{{ total_employees }}</p>
            <a href="{% url 'accounts:employee-list' %}" class="action-btn" style="text-decoration: none; font-size: 12px;">View All</a>
        </div>
    </div>

    <h3 style="margin-bottom: 15px;">Recent Time Logs</h3>
    <div class="table-responsive">
        <table class="projects-table">
            <thead>
                <tr>
                    <th style="width: 20%;">Date</th>
                    <th style="width: 30%;">Employee</th>
                    <th style="width: 35%;">Project</th>
                    <th style="width: 15%;">Hours</th>
                </tr>
            </thead>
            <tbody>
                {% for activity in recent_activities %}
                <tr>
                    <td>{{ activity.date|date:"d.m.Y" }}</td>
                    <td>{{ activity.employee.first_name }} {{ activity.employee.last_name }}</td>
                    <td>{{ activity.project.name }}</td>
                    <td style="font-weight: bold; color: #31a4f1;">{{ activity.hours_worked }} h</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="4" style="text-align: center; padding: 20px;">No recent activities found.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</main>
{% endblock %}
